<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>Breakout Game</title>
<style>
body{margin:0;overflow:hidden;background:#1e293b;font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;color:white;height:100vh;}
#game{background:#0f172a;box-shadow:0 0 30px rgba(0,0,0,0.8);display:block;}
#ui{position:fixed;top:20px;left:20px;font-size:20px;font-weight:bold;}
#gameOver{position:fixed;inset:0;display:none;align-items:center;justify-content:center;flex-direction:column;background:rgba(0,0,0,0.9);text-align:center;}
button{padding:12px 30px;border:none;border-radius:8px;font-size:18px;background:#22c55e;color:white;font-weight:bold;cursor:pointer;margin-top:20px;}
.back{position:fixed;top:20px;right:20px;padding:8px 16px;font-size:14px;}
</style>
</head>
<body>
<button class="back" onclick="location.href='index.html'">‚Üê Back</button>
<div id="ui">Score: 0 | Level: 1</div>
<div id="gameOver">
 <h1 id="endTitle">GAME OVER</h1>
 <div id="finalScore"></div>
 <button onclick="location.reload()">Restart</button>
 <button onclick="location.href='index.html'">Back to Menu</button>
</div>
<canvas id="game"></canvas>
<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
canvas.width=800;
canvas.height=600;
let score=0,level=1;
let difficulty=localStorage.getItem('gameDifficulty')||'easy';
let paddle={x:canvas.width/2-60,y:canvas.height-30,w:120,h:15,speed:8};
let ball={x:canvas.width/2,y:canvas.height/2,r:8,dx:4,dy:-4};
if(difficulty==='medium'){paddle.w=100;ball.dx=5;ball.dy=-5;}
if(difficulty==='hard'){paddle.w=80;ball.dx=6;ball.dy=-6;}
let bricks=[];
let keys={};
let gameRunning=true;

window.addEventListener('keydown',e=>keys[e.key]=true);
window.addEventListener('keyup',e=>keys[e.key]=false);
canvas.addEventListener('mousemove',e=>paddle.x=e.clientX-paddle.w/2);

function createBricks(){
 bricks=[];
 let rows=3+level;
 let cols=10;
 for(let r=0;r<rows;r++){
  for(let c=0;c<cols;c++){
   bricks.push({x:c*80+5,y:r*30+50,w:70,h:20,color:['#ef4444','#f59e0b','#22c55e','#3b82f6','#a855f7'][r%5]});
  }
 }
}

function update(){
 if(!gameRunning)return;
 if((keys['ArrowLeft']||keys['a']||keys['A'])&&paddle.x>0)paddle.x-=paddle.speed;
 if((keys['ArrowRight']||keys['d']||keys['D'])&&paddle.x<canvas.width-paddle.w)paddle.x+=paddle.speed;
 
 ball.x+=ball.dx;
 ball.y+=ball.dy;
 
 if(ball.x-ball.r<0||ball.x+ball.r>canvas.width)ball.dx*=-1;
 if(ball.y-ball.r<0)ball.dy*=-1;
 
 if(ball.y+ball.r>paddle.y&&ball.y-ball.r<paddle.y+paddle.h&&ball.x>paddle.x&&ball.x<paddle.x+paddle.w){
  ball.dy=-Math.abs(ball.dy);
  ball.dx+=(ball.x-(paddle.x+paddle.w/2))*0.1;
 }
 
 bricks.forEach((b,i)=>{
  if(ball.x+ball.r>b.x&&ball.x-ball.r<b.x+b.w&&ball.y+ball.r>b.y&&ball.y-ball.r<b.y+b.h){
   ball.dy*=-1;
   bricks.splice(i,1);
   score+=10;
   if(bricks.length===0){
    level++;
    ball.dx*=1.15;
    ball.dy*=1.15;
    paddle.w=Math.max(60,paddle.w-5);
    createBricks();
   }
  }
 });
 
 if(ball.y>canvas.height){
  gameRunning=false;
  document.getElementById("endTitle").innerText='GAME OVER';
  document.getElementById("finalScore").innerText=`Final Score: ${score}`;
  document.getElementById("gameOver").style.display='flex';
 }
}

function draw(){
 ctx.fillStyle='#0f172a';
 ctx.fillRect(0,0,canvas.width,canvas.height);
 
 ctx.fillStyle='#22c55e';
 ctx.fillRect(paddle.x,paddle.y,paddle.w,paddle.h);
 ctx.fillStyle='#16a34a';
 ctx.fillRect(paddle.x+5,paddle.y+3,paddle.w-10,paddle.h-6);
 
 ctx.fillStyle='#fbbf24';
 ctx.beginPath();
 ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);
 ctx.fill();
 ctx.fillStyle='#fff';
 ctx.beginPath();
 ctx.arc(ball.x-2,ball.y-2,ball.r/2,0,Math.PI*2);
 ctx.fill();
 
 bricks.forEach(b=>{
  ctx.fillStyle=b.color;
  ctx.fillRect(b.x,b.y,b.w,b.h);
  ctx.fillStyle='rgba(255,255,255,0.3)';
  ctx.fillRect(b.x+2,b.y+2,b.w-4,b.h/2-2);
  ctx.strokeStyle='rgba(0,0,0,0.3)';
  ctx.lineWidth=2;
  ctx.strokeRect(b.x,b.y,b.w,b.h);
 });
 
 document.getElementById("ui").innerText=`Score: ${score} | Level: ${level}`;
}

function gameLoop(){
 update();
 draw();
 requestAnimationFrame(gameLoop);
}

createBricks();
gameLoop();
</script>
<script>
// Mobile Touch Controls
let isTouching=false;

function getTouchPos(e,touch){
 const rect=canvas.getBoundingClientRect();
 return{x:touch.clientX-rect.left,y:touch.clientY-rect.top};
}

canvas.addEventListener('touchstart',e=>{
 e.preventDefault();
 isTouching=true;
});

canvas.addEventListener('touchmove',e=>{
 e.preventDefault();
 if(!isTouching||!gameRunning)return;
 const touch=e.touches[0];
 const pos=getTouchPos(e,touch);
 
 // Move paddle to follow touch X position
 paddle.x=pos.x-paddle.w/2;
 if(paddle.x<0)paddle.x=0;
 if(paddle.x>canvas.width-paddle.w)paddle.x=canvas.width-paddle.w;
});

canvas.addEventListener('touchend',e=>{
 e.preventDefault();
 isTouching=false;
});
</script>
</body>
</html>
