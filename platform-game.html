<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>Platform Jumper</title>
<style>
body{margin:0;overflow:hidden;background:#87ceeb;font-family:Arial,sans-serif;display:flex;justify-content:center;align-items:center;color:white;height:100vh;}
#game{background:#87ceeb;box-shadow:0 0 30px rgba(0,0,0,0.8);display:block;max-width:100vw;max-height:100vh;}
#ui{position:fixed;top:20px;left:20px;font-size:20px;font-weight:bold;color:#000;}
#gameOver{position:fixed;inset:0;display:none;align-items:center;justify-content:center;flex-direction:column;background:rgba(0,0,0,0.9);text-align:center;}
button{padding:12px 30px;border:none;border-radius:8px;font-size:18px;background:#22c55e;color:white;font-weight:bold;cursor:pointer;margin-top:20px;}
.back{position:fixed;top:20px;right:20px;padding:8px 16px;font-size:14px;}
@media(max-width:768px){
 #game{width:100vw!important;height:100vh!important;}
 #ui{font-size:16px;top:10px;left:10px;}
 .back{top:10px;right:10px;padding:6px 12px;font-size:12px;}
 button{padding:10px 20px;font-size:16px;}
}
</style>
</head>
<body>
<button class="back" onclick="location.href='index.html'">‚Üê Back</button>
<div id="ui">Score: 0</div>
<div id="gameOver">
 <h1>GAME OVER</h1>
 <div id="finalScore"></div>
 <button onclick="location.reload()">Restart</button>
 <button onclick="location.href='index.html'">Back to Menu</button>
</div>
<canvas id="game"></canvas>
<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
canvas.width=800;
canvas.height=600;
let score=0;
let level=1;
let player={x:100,y:400,w:40,h:40,vx:0,vy:0,speed:5,jumpPower:-12,onGround:false};
let platforms=[];
let coins=[];
let enemies=[];
let keys={};
let gameRunning=true;
let cameraX=0;
let levelComplete=false;
let goal={x:0,y:0,w:50,h:50};

const levels=[
 {platforms:[{x:0,y:550,w:300,h:50},{x:350,y:500,w:150,h:20},{x:550,y:450,w:150,h:20},{x:250,y:400,w:120,h:20},{x:450,y:350,w:120,h:20},{x:100,y:300,w:120,h:20},{x:600,y:300,w:150,h:20}],goal:{x:650,y:240}},
 {platforms:[{x:0,y:550,w:200,h:50},{x:250,y:500,w:100,h:20},{x:400,y:450,w:100,h:20},{x:550,y:400,w:100,h:20},{x:400,y:350,w:100,h:20},{x:250,y:300,w:100,h:20},{x:100,y:250,w:100,h:20},{x:250,y:200,w:100,h:20},{x:450,y:150,w:150,h:20}],goal:{x:500,y:90}},
 {platforms:[{x:0,y:550,w:150,h:50},{x:200,y:500,w:80,h:20},{x:350,y:450,w:80,h:20},{x:500,y:400,w:80,h:20},{x:650,y:350,w:100,h:20},{x:550,y:300,w:80,h:20},{x:400,y:250,w:80,h:20},{x:250,y:200,w:80,h:20},{x:100,y:150,w:80,h:20},{x:250,y:100,w:150,h:20}],goal:{x:300,y:40}},
 {platforms:[{x:0,y:550,w:120,h:50},{x:150,y:500,w:70,h:20},{x:280,y:450,w:70,h:20},{x:410,y:400,w:70,h:20},{x:540,y:350,w:70,h:20},{x:670,y:300,w:80,h:20},{x:540,y:250,w:70,h:20},{x:410,y:200,w:70,h:20},{x:280,y:150,w:70,h:20},{x:150,y:100,w:70,h:20},{x:280,y:50,w:150,h:20}],goal:{x:330,y:-10}},
 {platforms:[{x:0,y:550,w:100,h:50},{x:130,y:500,w:60,h:20},{x:220,y:450,w:60,h:20},{x:310,y:400,w:60,h:20},{x:400,y:350,w:60,h:20},{x:490,y:300,w:60,h:20},{x:580,y:250,w:60,h:20},{x:670,y:200,w:70,h:20},{x:580,y:150,w:60,h:20},{x:490,y:100,w:60,h:20},{x:400,y:50,w:150,h:20}],goal:{x:450,y:-10}}
];

function loadLevel(){
 let l=levels[level-1];
 platforms=JSON.parse(JSON.stringify(l.platforms));
 goal={x:l.goal.x,y:l.goal.y,w:50,h:50};
 coins=[];
 enemies=[];
 for(let i=0;i<8+level*2;i++){
  coins.push({x:Math.random()*700+50,y:Math.random()*400+50,r:12,collected:false});
 }
 for(let i=0;i<3+level;i++){
  enemies.push({x:Math.random()*600+200,y:500,w:30,h:30,vx:2+level*0.5});
 }
 player={x:100,y:400,w:40,h:40,vx:0,vy:0,speed:5,jumpPower:-12,onGround:false};
 levelComplete=false;
}

window.addEventListener('keydown',e=>keys[e.key]=true);
window.addEventListener('keyup',e=>keys[e.key]=false);

function update(){
 if(!gameRunning)return;
 
 if(keys['ArrowLeft']||keys['a'])player.vx=-player.speed;
 else if(keys['ArrowRight']||keys['d'])player.vx=player.speed;
 else player.vx=0;
 
 if((keys['ArrowUp']||keys['w']||keys[' '])&&player.onGround){
  player.vy=player.jumpPower;
  player.onGround=false;
 }
 
 player.vy+=0.6;
 player.x+=player.vx;
 player.y+=player.vy;
 
 player.onGround=false;
 platforms.forEach(p=>{
  if(player.x+player.w>p.x&&player.x<p.x+p.w&&player.y+player.h>p.y&&player.y+player.h<p.y+20&&player.vy>=0){
   player.y=p.y-player.h;
   player.vy=0;
   player.onGround=true;
  }
 });
 
 coins.forEach(c=>{
  if(!c.collected&&Math.hypot(player.x+player.w/2-c.x,player.y+player.h/2-c.y)<player.w/2+c.r){
   c.collected=true;
   score+=10;
  }
 });
 
 if(player.x+player.w>goal.x&&player.x<goal.x+goal.w&&player.y+player.h>goal.y&&player.y<goal.y+goal.h){
  if(level<levels.length){
   level++;
   score+=50;
   loadLevel();
  }else{
   gameRunning=false;
   document.getElementById("finalScore").innerText=`YOU WIN! Final Score: ${score}`;
   document.getElementById("gameOver").style.display='flex';
  }
 }
 
 enemies.forEach(e=>{
  e.x+=e.vx;
  if(e.x<0||e.x>canvas.width-e.w)e.vx*=-1;
  if(player.x+player.w>e.x&&player.x<e.x+e.w&&player.y+player.h>e.y&&player.y<e.y+e.h){
   gameRunning=false;
   document.getElementById("finalScore").innerText=`Score: ${score}`;
   document.getElementById("gameOver").style.display='flex';
  }
 });
 
 if(player.y>canvas.height){
  gameRunning=false;
  document.getElementById("finalScore").innerText=`Score: ${score}`;
  document.getElementById("gameOver").style.display='flex';
 }
}

function draw(){
 ctx.fillStyle='#87ceeb';
 ctx.fillRect(0,0,canvas.width,canvas.height);
 
 for(let i=0;i<5;i++){
  ctx.fillStyle='#fff';
  ctx.globalAlpha=0.7;
  ctx.beginPath();
  ctx.arc(100+i*200,100,40,0,Math.PI*2);
  ctx.fill();
  ctx.globalAlpha=1;
 }
 
 ctx.fillStyle='#8b4513';
 platforms.forEach(p=>{
  ctx.fillRect(p.x,p.y,p.w,p.h);
  ctx.fillStyle='#228b22';
  ctx.fillRect(p.x,p.y,p.w,8);
  ctx.fillStyle='#8b4513';
 });
 
 ctx.fillStyle='#ef4444';
 ctx.fillRect(player.x,player.y,player.w,player.h);
 ctx.fillStyle='#7f1d1d';
 ctx.fillRect(player.x+5,player.y+5,player.w-10,player.h-10);
 ctx.fillStyle='#fff';
 ctx.fillRect(player.x+10,player.y+10,8,8);
 ctx.fillRect(player.x+22,player.y+10,8,8);
 ctx.fillStyle='#000';
 ctx.fillRect(player.x+15,player.y+25,10,3);
 
 coins.forEach(c=>{
  if(!c.collected){
   ctx.fillStyle='#fbbf24';
   ctx.beginPath();
   ctx.arc(c.x,c.y,c.r,0,Math.PI*2);
   ctx.fill();
   ctx.fillStyle='#fff';
   ctx.font='16px Arial';
   ctx.fillText('$',c.x-5,c.y+6);
  }
 });
 
 enemies.forEach(e=>{
  ctx.fillStyle='#a855f7';
  ctx.fillRect(e.x,e.y,e.w,e.h);
  ctx.fillStyle='#fff';
  ctx.fillRect(e.x+5,e.y+5,6,6);
  ctx.fillRect(e.x+19,e.y+5,6,6);
  ctx.fillStyle='#000';
  ctx.fillRect(e.x+10,e.y+20,10,3);
 });
 
 ctx.fillStyle='#22c55e';
 ctx.fillRect(goal.x,goal.y,goal.w,goal.h);
 ctx.fillStyle='#16a34a';
 ctx.fillRect(goal.x+5,goal.y+5,goal.w-10,goal.h-10);
 ctx.fillStyle='#fff';
 ctx.font='bold 24px Arial';
 ctx.fillText('üèÅ',goal.x+12,goal.y+35);
 
 document.getElementById("ui").innerText=`Level: ${level}/${levels.length} | Score: ${score}`;
}

function gameLoop(){
 update();
 draw();
 requestAnimationFrame(gameLoop);
}

loadLevel();
gameLoop();
</script>
<script>
// Touch Swipe Controls
let touchStartX=0,touchStartY=0;
canvas.addEventListener('touchstart',e=>{
 touchStartX=e.touches[0].clientX;
 touchStartY=e.touches[0].clientY;
});
canvas.addEventListener('touchend',e=>{
 let touchEndX=e.changedTouches[0].clientX;
 let touchEndY=e.changedTouches[0].clientY;
 let diffX=touchEndX-touchStartX;
 let diffY=touchEndY-touchStartY;
 if(Math.abs(diffX)>Math.abs(diffY)){
  if(diffX>30){keys['ArrowRight']=true;keys['d']=true;}
  else if(diffX<-30){keys['ArrowLeft']=true;keys['a']=true;}
 }else{
  if(diffY<-30){keys['ArrowUp']=true;keys['w']=true;keys[' ']=true;}
 }
});
</script>
</body>
</html>
